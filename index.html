<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tyre Quotation Maker</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<div class="container">
    <h2>Tyre Quotation Maker</h2>

    <div class="settings-panel">
        <div class="settings-grid">
            <div>
                <label>Customer Phone</label>
                <input type="number" id="customer-phone" placeholder="Enter 10-digit Phone">
            </div>
            <div>
                <label>Payment Method</label>
                <select id="payment-method">
                    <option value="advance">Advance NEFT</option>
                    <option value="credit">Credit (7 Days)</option>
                </select>
            </div>
            <div>
                <label>Transportation</label>
                <select id="transport-mode">
                    <option value="exw">Ex Works (EXW)</option>
                    <option value="included">Included (Free to Site)</option>
                </select>
            </div>
        </div>
    </div>
    
    <div id="rows-container">
        </div>

    <div class="button-group">
        <button class="btn-add" style="background-color: #8e44ad;" onclick="openModal()">+ Add New Customer</button>
        <button class="btn-add" onclick="addNewRow()">+ Add More Tyres</button>
        <button class="btn-gen" onclick="generateQuotation()">Generate Quotation</button>
    </div>

    <div id="customerModal" class="modal">
        <div class="modal-content">
            <h3>Register New Customer</h3>
            
            <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                <div style="flex: 3;">
                    <label>Name</label>
                    <input type="text" id="new-name" placeholder="Full Name" style="width: 100%; padding: 8px;">
                </div>
                <div style="flex: 1;">
                    <label>Gender</label>
                    <select id="new-gender" style="width: 100%; padding: 8px; height: 35px;">
                        <option value="M">M</option>
                        <option value="F">F</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label>Phone Number</label>
                <input type="number" id="new-phone" placeholder="10-digit Number">
            </div>

            <div class="form-group">
                <label>Organization Name <span style="color: #e67e22; font-size: 0.85em; font-weight: bold;">(Leave empty if N/A)</span></label>
                <input type="text" id="new-org" placeholder="Company Name">
            </div>

            <div class="form-group">
                <label>State</label>
                <input list="state-list" id="new-state" placeholder="Select State" onchange="populateDistricts()">
                <datalist id="state-list"></datalist>
            </div>

            <div class="form-group">
                <label>District</label>
                <input list="district-list" id="new-dist" placeholder="Select District" onchange="populateTaluks()">
                <datalist id="district-list"></datalist>
            </div>

            <div class="form-group">
                <label>Taluk</label>
                <input list="taluk-list" id="new-taluk" placeholder="Select Taluk">
                <datalist id="taluk-list"></datalist>
            </div>

            <div class="form-group">
                <label>Pincode</label>
                <input type="number" id="new-pin" placeholder="6-digit Pin">
            </div>
            
            <div class="modal-buttons">
                <button class="btn-cancel" onclick="closeModal()">Cancel</button>
                <button class="btn-save" onclick="saveNewCustomer()">Save & Select</button>
            </div>
        </div>
    </div>
</div>

<script src="config.js"></script>
<script src="data.js"></script>
<script src="locations.js"></script>
<script src="ui.js"></script>
<script src="pdf.js"></script>

<script>
    loadDatabase();
    loadCustomerDatabase(); 
</script>

</body>
</html>
